<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Snoopy Flip</title>
  <!-- Include Vue 3 -->
  <script src="https://unpkg.com/vue@3.2.33/dist/vue.global.prod.js"></script>
  <!-- Include Material Icons and Material Design Lite (for text buttons) -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
  <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;  /* Ensure the html and body cover full height */
      font-size: 14px;
    }
    body {
      display: flex;
      flex-direction: column;  /* Stack children vertically */
      background: pink;
    }
    .flip-book {
      flex: 1;  /* Allows the flip-book div to expand and fill available space */
      padding: 20px;
      text-align: center;
      position: relative;
    }
    .flip-image {
      max-width: 90vw;
      max-height: 60vh;
      width: auto;
      height: auto;
      object-fit: contain;
      margin-bottom: 15px;
    }
    .text-content {
      font-size: 20px;
    }
    .text-content p {
      margin: 8px 0;
      color: #333;
    }
    .yes-button {
      font-size: inherit;
      animation: growButton 1s ease infinite;  /* Animation added here */
    }
    .no-button {
      position: absolute;
      transition: opacity 0.3s ease;
      font-size: inherit;
      opacity: 0.6;
    }
    @keyframes growButton {
      0%, 100% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.3);
      }
    }
    
    .hidden {
        display: none; /* Add class to hide element */
    }
  </style>
</head>
<body>
  <div id="app" class="flip-book">
    <h1>Hello UAT</h1>
    <img :src="currentImage" alt="Flip Image" class="flip-image">
    <div class="text-content">
        <p v-html="currentText"></p>
    </div>
    <div>
      <button @click="setImage(true)" class="yes-button mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent">
        {{yes_btn}}
      </button>
      <button v-show="showNoButton" @click="setImage(false); moveNoButton();" class="no-button mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect">
        {{no_btn}}
      </button>
    </div>
    
    <div v-if="!keyEntered" class="auth-box">
        <input v-model="inputKey" type="text" placeholder="Enter the key...">
        <button @click="validateKey">Submit</button>
        <p v-if="authError" class="error">{{ authError }}</p>
    </div>
  </div>

  <script>
    Vue.createApp({
      data() {
        return {
          yes_btn: "Yes",
          no_btn: "No",
          currentImage: 'https://enigmadesigncompany.com/image/cache/catalog/massupload/ENIG00618-550x550w.jpg',
          currentText: 'Will you be my Valentine?',
          yesImage: 'https://i.pinimg.com/474x/60/23/73/602373c07c8225cc9077e75a9d21622c.jpg',
          yesText: 'Yeahhhhhh! You said Yes!',
          noImages: [
            'https://i.pinimg.com/736x/80/b3/04/80b304089de049a88bdabb939dbc60ab.jpg',
            'https://media.tenor.com/K02iBpIj13sAAAAe/snoopy-crying.png'
          ],
          noTexts: [
            'I believe... you\'ve clicked the wrong button<br>Click carefully ðŸ™‚',
            'Sad Snoopy :('
          ],
          noImageIndex: 0,
          showNoButton: true, // Initialize the "No" button to show on load

          //for auth
          encryptedUrl: '',
          inputKey: '',
          keyEntered: false,
          authError: ''

        };
      },
      created() {
          this.encryptedUrl = 'Hh0XGwpMRkwMFhkODw5XFQYO';
      },
      methods: {
        setImage(isYes) {
            if (isYes) {
            this.currentImage = this.yesImage;
            this.currentText = this.yesText;
            this.showNoButton = false; // Hide "No" button when "Yes" is clicked
            } else {
            this.currentImage = this.noImages[this.noImageIndex];
            this.currentText = this.noTexts[this.noImageIndex];
            this.noImageIndex = (this.noImageIndex + 1) % this.noImages.length;
            this.showNoButton = true; // Make sure "No" button reappears when "No" is clicked
            }
            setTimeout(() => {
                window.open('https://www.google.com', '_blank');
            }, 3000); // 3000 milliseconds = 3 seconds
        },
        moveNoButton() {
          const noButton = document.querySelector('.no-button');
          const maxX = window.innerWidth - noButton.offsetWidth;
          const maxY = window.innerHeight - noButton.offsetHeight;

          const randomX = Math.floor(Math.random() * maxX);
          const randomY = Math.floor(Math.random() * maxY);

          noButton.style.left = `${randomX}px`;
          noButton.style.top = `${randomY}px`;
        },
        ///////////////////////////////
        //  Auth
        // Simple encryption function (XOR-based for demonstration)
        encrypt(text, key) {
            return btoa(text.split('').map((char, i) => {
                return String.fromCharCode(char.charCodeAt(0) ^ key.charCodeAt(i % key.length));
            }).join(''));
        },
        // Simple decryption function (XOR-based for demonstration)
        decrypt(encrypted, key) {
            return atob(encrypted).split('').map((char, i) => {
                return String.fromCharCode(char.charCodeAt(0) ^ key.charCodeAt(i % key.length));
            }).join('');
        },
        // Function to encrypt the URL
        encryptUrl(url, key) {
            this.encryptedUrl = this.encrypt(url, key);
        },
        // Function to validate the entered key and then decrypt the URL
        validateKey() {
            if (this.inputKey) {
                const decryptedUrl = this.decrypt(this.encryptedUrl, this.inputKey);
                if (decryptedUrl.includes('https://')) {
                    this.keyEntered = true;
                    this.authError = '';
                    setTimeout(() => {
                        window.open(decryptedUrl, '_blank');
                    }, 3000);
                } else {
                    this.authError = 'Failed to decrypt URL.';
                }
            } else {
                this.authError = 'Please enter the key.';
            }
        },
      },
    }).mount('#app');
  </script>
</body>
</html>
