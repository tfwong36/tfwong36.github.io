<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Snoopy Flip</title>
  <!-- Include Vue 3 -->
  <script src="https://unpkg.com/vue@3.2.33/dist/vue.global.prod.js"></script>
  <!-- Include Material Icons and Material Design Lite (for text buttons) -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
  <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;  /* Ensure the html and body cover full height */
      font-size: 14px;
    }
    body {
      display: flex;
      flex-direction: column;  /* Stack children vertically */
      background: pink;
    }
    .flip-book {
      flex: 1;  /* Allows the flip-book div to expand and fill available space */
      padding: 20px;
      text-align: center;
      position: relative;
    }
    .flip-image {
      max-width: 70vw;
      max-height: 60vh;
      width: auto;
      height: auto;
      object-fit: contain;
      margin-bottom: 15px;
    }
    .text-content {
      font-size: 20px;
    }
    .text-content p {
      margin: 8px 0;
      color: #333;
    }
    .yes-button {
      font-size: inherit;
      animation: growButton 1s ease infinite;  /* Animation added here */
    }
    .no-button {
      position: absolute;
      transition: opacity 0.3s ease;
      font-size: inherit;
      opacity: 0.6;
    }
    @keyframes growButton {
      0%, 100% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.3);
      }
    }
    .auth-box {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      //background-color: #fce4ec; /* Light pink background for the auth box */
    }
    
    .auth-box input {
      padding: 10px 15px;
      margin-bottom: 10px;
      font-size: 18px;
      border: 1px solid #f48fb1; /* Pink border for the input */
      border-radius: 5px; /* Rounded corners for the input */
    }
    
    .auth-box button {
      padding: 10px 20px;
      font-size: 18px;
      background-color: #f48fb1; /* Pink background for the button */
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.3s ease; /* Smooth background color transition */
    }
    
    .auth-box button:hover {
      background-color: #f06292; /* Slightly darker pink on hover */
    }
    
    .auth-box .error {
      color: #d32f2f; /* Red color for error messages */
      margin-top: 5px;
    }
    
    .hidden {
        display: none; /* Add class to hide element */
    }
  </style>
</head>
<body>
  <div id="app" class="flip-book">
    <!-- content -->
    <div v-if="keyEntered" class="flip-book">
        <h1>Hello {{inputKey}}</h1>
        <img :src="currentImage" alt="Flip Image" class="flip-image">
        <div class="text-content">
            <p v-html="currentText"></p>
        </div>
        <div>
        <button @click="setImage(true)" class="yes-button mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent">
            {{yes_btn}}
        </button>
        <button v-show="showNoButton" @click="setImage(false); moveNoButton();" class="no-button mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect">
            {{no_btn}}
        </button>
        </div>
    </div>
    
    <!-- auth box -->
    <div v-else class="auth-box"> <!-- This div will show up if the correct key hasn't been entered -->
        <h2>Who are you?</h2>
        <input v-model="inputKey" type="text" placeholder="Enter the key..."/>
        <button @click="validateKey">Unlock</button>
        <p v-if="authError" class="error">{{ authError }}</p>
    </div>

  </div>

  <script>
    Vue.createApp({
      data() {
        return {
          yes_btn: "Yes",
          no_btn: "No",
          currentImage: 'https://enigmadesigncompany.com/image/cache/catalog/massupload/ENIG00618-550x550w.jpg',
          currentText: '‰ªäÊó•ÂíÅÁâπÂà• Ë¶ÅÂîîË¶ÅÂá∫ÂöüÈÄÅÊú±Âè§Âäõ‰øæÊàë?üç´',
          yesImage: 'https://i.pinimg.com/474x/60/23/73/602373c07c8225cc9077e75a9d21622c.jpg',
          yesText: 'Yeahhhhhh! You said Yes!',
          noImages: [
            'https://i.pinimg.com/736x/80/b3/04/80b304089de049a88bdabb939dbc60ab.jpg',
            'https://media.tenor.com/K02iBpIj13sAAAAe/snoopy-crying.png'
          ],
          noTexts: [
            '‰øÇÂîî‰øÇÊí≥Âà∂ÈåØÂïä<br>ÂèØ‰ª•ÂÜçÊí≥Â§öÊ¨°ÂñéüôÇ',
            'Sad Snoopy üôÅ ÂîîÂ•ΩÁé©Âò¢ üôÅ'
          ],
          noImageIndex: 0,
          showNoButton: true, // Initialize the "No" button to show on load

          //for auth
          encryptedUrl: '',
          inputKey: '',
          keyEntered: false,
          authError: ''

        };
      },
      created() {
        this.encryptedUrl = 'Hh0XGwpMRkwKCR9HFAMYAhoCGwlYCgwGVgUMDQ9GBgEMBRxLUVZZTENdW1NIR1pFHxwOHV4EEh8MBg4cV0wlW1xPL0ZSQFNRW04/RkxaLVxOLUYqOw==';
        // 'Hh0XGwpMRkwMFhkODw5XFQYO';
      },
      methods: {
        setImage(isYes) {
            if (isYes) {
                this.currentImage = this.yesImage;
                this.currentText = this.yesText;
                this.showNoButton = false; // Hide "No" button when "Yes" is clicked
                
                setTimeout(() => {
                    console.log(this.decryptedUrl)
                    window.open(this.decryptedUrl, '_blank');
                }, 2000); // 3000 milliseconds = 3 seconds
            } else {
                this.currentImage = this.noImages[this.noImageIndex];
                this.currentText = this.noTexts[this.noImageIndex];
                this.noImageIndex = (this.noImageIndex + 1) % this.noImages.length;
                this.showNoButton = true; // Make sure "No" button reappears when "No" is clicked
            }
        },
        moveNoButton() {
          const noButton = document.querySelector('.no-button');
          const maxX = window.innerWidth - noButton.offsetWidth;
          const maxY = window.innerHeight - noButton.offsetHeight;

          const randomX = Math.floor(Math.random() * maxX);
          const randomY = Math.floor(Math.random() * maxY);

          noButton.style.left = `${randomX}px`;
          noButton.style.top = `${randomY}px`;
        },
        ///////////////////////////////
        //  Auth
        decrypt(encrypted, key) {
            return atob(encrypted).split('').map((char, i) => {
                return String.fromCharCode(char.charCodeAt(0) ^ key.charCodeAt(i % key.length));
            }).join('');
        },
        validateKey() {
            if (this.inputKey) {
                const decryptedUrl = this.decrypt(this.encryptedUrl, this.inputKey.toLowerCase());
                this.decryptedUrl = decryptedUrl;
                if (decryptedUrl.includes('https://api.whatsapp.com')) {
                    this.keyEntered = true;
                    this.authError = '';
                } else {
                    this.authError = 'Only the right person can open the right webpage üôÇ';
                }
            } else {
                this.authError = 'Put your name there~';
            }
        },
      },
    }).mount('#app');
  </script>
</body>
</html>
